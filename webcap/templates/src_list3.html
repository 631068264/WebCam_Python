{% extends "base.html" %}
{% block title %}资源管理{% endblock %}
{% block css %}
    <link href="{{ config.static_url_path }}/css/normalize.css?v={{ ver('css/normalize.css') }}" rel="stylesheet"/>
    <link href="{{ config.static_url_path }}/css/style.css?v={{ ver('css/style.css') }}" rel="stylesheet"/>
    <link href="/static/css/test/sexylightbox.css" rel="stylesheet">
<style>

    /*默认样式，主要是position:fixed实现屏幕绝对定位*/
    #gotoTop {
        display: none;
        position: fixed;
        cursor: pointer;
        top: 83%;
        left: 67%;
        width: 20px;
        background: #fff;
    }

    /*用CSS表达式(expression)来实现ie6下position:fixed效果*/
    #gotoTop {
        _position: absolute;
        _top: expression(documentElement.scrollTop + documentElement.clientHeight * 3/4 + "px")
    }

    /*鼠标进入的反馈效果*/
    #gotoTop.hover {
        background: #5CB542;
        color: #fff;
        text-decoration: none;
    }
</style>

    {{ super() }}


{% endblock %}
{% block body %}

    <div role="main" class="main">
        <div class="filter">
            <em class="filterName">Filter</em>
            <a class="all selected" href="#">所有</a>
            <a class="video" href="#">视频</a>
            <a class="photography" href="#">图片</a>
        </div>
    </div>
    <div class="postExcerpts">
        {% for s in srcs %}
            <div class="postExcerpt video">
                <div class="postExcerptInner">
                    <div class="titleAndCat">
                        <h2>{{ s.create_time }}</h2>
                        <em class="cat">Video</em>
                    </div>
                    <div class="imgWrap">
                        <img src="{{ s.thumbnail }}">
                    </div>
                    <div id="{{s.id}}" style="display:none;">
                        <video src="{{s.src_path}}" controls></video>
                    </div>
                    <a class="playVideo" href="#TB_inline?height=298&width=362&background=#FFF&inlineId={{s.id}}"
                       rel="sexylightbox[video]" title="{{ s.create_time }}"></a>
                </div>
            </div>
            <div class="postExcerpt photography">
                <div class="postExcerptInner">
                    <div class="titleAndCat">
                        <h2>{{ s.create_time }}</h2>
                        <em class="cat">Photography</em>
                    </div>
                    <div class="imgWrap">
                        <img src="{{ s.thumbnail }}">
                    </div>
                    <a class="view" href="{{ s.thumbnail }}?height=500&width=700" rel="sexylightbox[photography]"
                       title="{{ s.create_time }}"></a>
                </div>
            </div>
        {% endfor %}
    </div>

<div id="page"></div>
{% endblock body %}
{% block tail_js %}
    {{ super() }}

    <script src="{{ config.static_url_path }}/js/audioPlayer.js?v={{ ver('js/audioPlayer.js') }}"></script>
    <script src="{{ config.static_url_path }}/js/sort.js?v={{ ver('js/sort.js') }}"></script>
    <script src="/static/js/test/jquery.easing.1.3.js"></script>
    <script src="/static/js/test/sexylightbox.v2.3.jquery.js"></script>
    <script>
        SexyLightbox.initialize({color: 'white', imagesdir: '{{config.static_url_path}}/images/sexyimages'});

        function gotoTop(min_height) {
            //预定义返回顶部的html代码，它的css样式默认为不显示
            var gotoTop_html = '<div id="gotoTop">返回顶部</div>';
            //将返回顶部的html代码插入页面上id为page的元素的末尾
            $("#page").html(gotoTop_html);
            $("#gotoTop").click(//定义返回顶部点击向上滚动的动画
                    function () {
                        $('html,body').animate({scrollTop: 0}, 700);
                    }).hover(//为返回顶部增加鼠标进入的反馈效果，用添加删除css类实现
                    function () {
                        $(this).addClass("hover");
                    },
                    function () {
                        $(this).removeClass("hover");
                    });
            //获取页面的最小高度，无传入值则默认为600像素
            min_height ? min_height = min_height : min_height = 600;
            //为窗口的scroll事件绑定处理函数
            $(window).scroll(function () {
                //获取窗口的滚动条的垂直位置
                var s = $(window).scrollTop();
                //当窗口的滚动条的垂直位置大于页面的最小高度时，让返回顶部元素渐现，否则渐隐
                if (s > min_height) {
                    $("#gotoTop").fadeIn(100);
                } else {
                    $("#gotoTop").fadeOut(200);
                }

            });
        }

        gotoTop();

    </script>
{% endblock tail_js %}